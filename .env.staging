# Configuration pour l'environnement de staging
APP_NAME="FacturX Staging"
APP_ENV=staging
APP_KEY=
APP_DEBUG=true
APP_URL=https://staging.facturx.com

LOG_CHANNEL=stack
LOG_DEPRECATIONS_CHANNEL=null
LOG_LEVEL=debug

# Base de données PostgreSQL Staging
DB_CONNECTION=pgsql
DB_HOST=postgres-staging.internal
DB_PORT=5432
DB_DATABASE=facturx_staging
DB_USERNAME=facturx_staging
DB_PASSWORD=${DB_PASSWORD}

# Redis Staging
REDIS_HOST=redis-staging.internal
REDIS_PASSWORD=${REDIS_PASSWORD}
REDIS_PORT=6379
REDIS_DB=0

# Configuration cache/session Staging
CACHE_DRIVER=redis
SESSION_DRIVER=redis
SESSION_LIFETIME=120
SESSION_ENCRYPT=true
SESSION_SECURE_COOKIE=true
SESSION_SAME_SITE=strict

# Queue Staging
QUEUE_CONNECTION=redis

# Mail Staging (Mailpit ou service de test)
MAIL_MAILER=smtp
MAIL_HOST=mailpit.staging.internal
MAIL_PORT=1025
MAIL_USERNAME=null
MAIL_PASSWORD=null
MAIL_ENCRYPTION=null
MAIL_FROM_ADDRESS="staging@facturx.com"
MAIL_FROM_NAME="${APP_NAME}"

# Filesystem Staging
FILESYSTEM_DISK=s3
AWS_ACCESS_KEY_ID=${AWS_ACCESS_KEY_ID}
AWS_SECRET_ACCESS_KEY=${AWS_SECRET_ACCESS_KEY}
AWS_DEFAULT_REGION=eu-west-3
AWS_BUCKET=${AWS_BUCKET_STAGING}
AWS_USE_PATH_STYLE_ENDPOINT=false

# Broadcasting Staging
BROADCAST_DRIVER=pusher
PUSHER_APP_ID=${PUSHER_APP_ID_STAGING}
PUSHER_APP_KEY=${PUSHER_APP_KEY_STAGING}
PUSHER_APP_SECRET=${PUSHER_APP_SECRET_STAGING}
PUSHER_HOST=
PUSHER_PORT=443
PUSHER_SCHEME=https
PUSHER_APP_CLUSTER=eu

VITE_PUSHER_APP_KEY="${PUSHER_APP_KEY}"
VITE_PUSHER_HOST="${PUSHER_HOST}"
VITE_PUSHER_PORT="${PUSHER_PORT}"
VITE_PUSHER_SCHEME="${PUSHER_SCHEME}"
VITE_PUSHER_APP_CLUSTER="${PUSHER_APP_CLUSTER}"

# Configuration facturation électronique Staging (Sandbox)
PPF_API_URL=https://sandbox.api.ppf.gouv.fr
PPF_API_KEY=${PPF_API_KEY_SANDBOX}
PPF_ENVIRONMENT=sandbox
PDP_TEST_MODE=true

# Configuration paiements Staging (Test)
STRIPE_PUBLISHABLE_KEY=${STRIPE_PUBLISHABLE_KEY_TEST}
STRIPE_SECRET_KEY=${STRIPE_SECRET_KEY_TEST}
STRIPE_WEBHOOK_SECRET=${STRIPE_WEBHOOK_SECRET_TEST}

# Configuration RGPD/sécurité Staging
SANCTUM_STATEFUL_DOMAINS=staging.facturx.com
SESSION_SECURE_COOKIE=true
TRUSTED_PROXIES=*

# Monitoring et logging Staging
SENTRY_LARAVEL_DSN=${SENTRY_DSN_STAGING}
SENTRY_TRACES_SAMPLE_RATE=1.0

# Rate limiting (plus permissif en staging)
RATE_LIMIT_API=120
RATE_LIMIT_LOGIN=10

# Optimisations Performance
OCTANE_SERVER=swoole
OCTANE_WORKERS=2
OCTANE_TASK_WORKERS=2
OCTANE_WATCH=true

# Configuration backup Staging
BACKUP_DISK=s3
BACKUP_NOTIFICATIONS_SLACK_WEBHOOK_URL=${SLACK_WEBHOOK_URL}

# Configuration spécifique FacturX Staging
FACTURX_COMPANY_SIREN=123456789
FACTURX_COMPANY_SIRET=12345678900001
FACTURX_COMPANY_TVA=FR12345678901
FACTURX_PDP_DEFAULT=test_pdp
FACTURX_ENABLE_DEMO_MODE=true

# Debugging supplémentaire pour staging
TELESCOPE_ENABLED=true
DEBUGBAR_ENABLED=true
QUERY_DETECTOR_ENABLED=true
